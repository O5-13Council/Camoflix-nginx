<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>New Tab</title>
    <meta
      name="description"
      content="Camouflage search engine using Ultraviolet"
    />
    <meta
      name="keywords"
      content="camouflage, camobrowser, proxy, web proxy, ultraviolet, service workers, unblock websites, unblock chromebook, free web proxy, proxy list, proxy sites, un block chromebook, online proxy, proxy server, proxysite, proxy youtube, bypass securly, bypass iboss, bypass lightspeed filter, holy unblocker, chromebooks, titanium network, unblock youtube, youtube proxy, unblocked youtube, youtube unblocked"
    /> 
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="#434c5e"
    />
    <meta name="googlebot" content="index, follow, snippet" />
    <link rel="shortcut icon" content="favicon.ico" />
    <link rel="stylesheet" href="index.css" />
    <script src="baremux/index.js" defer></script>
    <script src="epoxy/index.js" defer></script>
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="register-sw.js" defer></script>
    <script src="search.js" defer></script>
    <script src="index.js" defer></script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is Ultraviolet (Web Proxy)?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Highly sophisticated proxy used for evading internet censorship or accessing websites in a controlled sandbox using the power of service-workers and more!"
            }
          },
          {
            "@type": "Question",
            "name": "How do I unblock sites using Ultraviolet?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Simply head to an official site featuring Ultraviolet such as Holy Unblocker or Incognito! You can also self-host Ultraviolet on your own web server for maximum privacy."
            }
          },
          {
            "@type": "Question",
            "name": "What if Ultraviolet is blocked or not working?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Join the Titanium Network Discord at discord.gg/unblock!"
            }
          }
        ]
      }
    </script>
  </head>





  <body onload="fun();">
    <div id="newBox">
      <!-- 
        this an modified copy version of Ultraviolet-App.
        https://github.com/titaniumnetwork-dev/Ultraviolet-App 
        https://github.com/titaniumnetwork-dev  - TitaniumNetwork
        https://discord.gg/unblock - TitaniumNetwork Discord
      -->

      <style>
        .title, .engine {
          margin: 0; 
          padding: 0;
          color: white;
        }
        .engine-logo {
          margin: 0; padding: 0;
          width: 30px; height: 30px;
          position: relative;
          top: 10px;
        }
        .thecredits {
          color: white; 
          margin: 0; padding: 0;
          position: absolute; 
          bottom: 0; right: 0;
          text-decoration: none;
          overflow: auto;
          display: inline-flex;          
        }
        .logocamo {
          margin: 0; padding: 0;
          width: 250px; height: 250px;
        }
      </style>

    <center  style="display: none;">
      <br><br>
      <image class="logocamo" src="css/images/logo.PNG"></image>
      <h2 class="title"> Camouflage </h2>
      <span class="engine">Current Engine(Ultraviolet) <image class="engine-logo" src="uv.png"></image></span>

      <br><br><br>

      <div id="camo-form">  <!-- URL Request -->
        <form id="uv-form" class="flex-center">
          <input
            id="uv-search-engine"
            value="https://www.google.com/search?q=%s"
            type="hidden"
          />
          <input id="uv-address" type="text" placeholder="Searching the web" />
        </form>
      </div>
    </center>


    <div class="thecredits" style="display: none;">
      <a style="text-decoration: none; color: white;" href="https://disocrd.gg/camouflage">Discord</a>
      <a>ㅤ</a>
      <a title="License information" href="credits.html" style="text-decoration: none; color: white;">Credits</a>
      <a>ㅤ</a>
      <span style="color: white;">Ultraviolet &copy; TN 2023</span>
    </div>
      <div class="desc left-margin"> <!-- Error Box -->
        <p id="uv-error"></p>
        <pre id="uv-error-code"></pre>
      </div>



      <iframe style="display: none;" id="uv-frame"></iframe>      
    </div>  <!-- End Of New Version -->
    <div id="dascript">
      <script>
        /*
        example: url
        remove UV and Service 
        then decode
          /uv/service/hvtrs8%2F-wuw%2Cgmoelg.aoo%2Fqecrah%3Dq%3Fdknqnmiwr
        */
        
        var furl = "camouflage://newtab";
        var ftitle = "New Tab"
        const theframe = document.getElementById("uv-frame")

  
        async function updateURL(s) {
          let u = document.getElementById("uv-frame").src
          while(u.includes(" ")) {
            u = u.replace(" ", "")
          }
          if(!u || u === "" || u === "") {
            if(!u) { u = "Error: Null" }
            if(u === "" || u === " ") { u = "New Tab" }
          } else {
            const p = u.split("/")
            const f = p[p.length - 1]
            furl = await Ultraviolet.codec.xor.decode(f)
          }
          const content = theframe.contentDocument;
          console.log(content)
          if(content) {
            ftitle = content.title;
            if(ftitle === "" || ftitle === " ") {
              ftitle = "New Tab"
            }
            if(!ftitle) {
              ftitle = "Error: Null"
            }
          }
          if(s) {
            setTimeout(() => { updateURL("S") }, 2500)
          }
        }; updateURL("s");

        /*
</script>
<script>
          var ds = new URLSearchParams(window.location.search);
</script>
<script>  
try{
        var form = document.getElementById("uv-form");
        var address = document.getElementById("uv-address");
        var searchEngine = document.getElementById("uv-search-engine");
        var error = document.getElementById("uv-error");
        var uuu;
        var fun = (async () => {
          uuu = ds.get("url"); console.log(uuu);
          if(uuu) {
            const errorCode = document.getElementById("uv-error-code");
            const connection = new BareMux.BareMuxConnection("/baremux/worker.js")
            const ur = uuu
              try {
                await registerSW();
              } catch (err) {
                error.textContent = "Failed to register service worker.";
                errorCode.textContent = err.toString();
                throw err;
              }
  
              const url = search(ur, searchEngine.value);
  
              let frame = document.getElementById("uv-frame");
              frame.style.display = "block";
              let wispUrl = (location.protocol === "https:" ? "wss" : "ws") + "://" + location.host + "/wisp/";
              if (await connection.getTransport() !== "/epoxy/index.mjs") {
                await connection.setTransport("/epoxy/index.mjs", [{ wisp: wispUrl }]);
              }
              frame.src = __uv$config.prefix + __uv$config.encodeUrl(url);
          }
        })
} catch(err) { console.error(err); }        
        </script>
        <script>
          const d = localStorage.getItem("dev");
          if(d === "Yes") {
            javascript:(function () { var script = document.createElement('script'); script.src="https://cdn.jsdelivr.net/npm/eruda"; document.body.appendChild(script); script.onload = function () { eruda.init() } })();
          }
        </script>
    </div>
  </body>
</html>
